function h(n,a){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);a&&(c=c.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,c)}return e}function u(n){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?h(Object(e),!0).forEach(function(c){A(n,c,e[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(e,c))})}return n}function A(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}var O={},j="https://www.googletagmanager.com/gtag/js",N={debug_mode:!1,send_page_view:!1,anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0,cookie_flags:""},E={gtagName:"gtag",dataLayerName:"ga4DataLayer",measurementIds:[],gtagConfig:N};function S(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=0,e=b(n.measurementIds),c=u(u({},E),n);return{name:"google-analytics",config:c,initialize:function(t){var r=t.config,i=t.instance,o=r.dataLayerName,w=r.customScriptSrc,s=r.gtagName,g=r.gtagConfig,d=r.debug,f=r.nonce,m=o?"&l=".concat(o):"",p=w||"".concat(j,"?id=").concat(e[0]).concat(m);if(!P(p)){var l=document.createElement("script");l.async=!0,l.src=p,f&&l.setAttribute("nonce",f),document.body.appendChild(l)}window[o]||(window[o]=window[o]||[]),window[s]||(window[s]=function(){window[o].push(arguments)}),window[s]("js",new Date);var y=u(u({},N),g||{});d===!0?y.debug_mode=!0:delete y.debug_mode;var D=i.user()||{},_=D.traits||{};Object.keys(_).length&&window[s]("set","user_properties",_);for(var v=0;v<e.length;v++)O[e[v]]||(window[s]("config",e[v],y),O[e[v]]=!0)},identify:function(t){var r=t.payload,i=t.config,o=i.gtagName;!window[o]||!e.length||(r.userId&&window[o]("set",{user_id:r.userId}),Object.keys(r.traits).length&&window[o]("set","user_properties",r.traits))},page:function(t){var r=t.payload,i=t.config,o=t.instance,w=i.gtagName,s=i.gtagConfig;if(!(!window[w]||!e.length)){var g=r.properties,d=g.send_to,f=o.getState("context.campaign"),m={page_title:g.title,page_location:g.url,page_path:g.path||document.location.pathname,page_hash:g.hash,page_search:g.page_search,page_referrer:g.referrer},p=I(f),l=o.user("userId"),y=u(u(u(u({},d?{send_to:d}:{}),m),p),l?{user_id:l}:{});if(s&&s.send_page_view&&a===0){a++;return}window[w]("event","page_view",y),a++}},track:function(t){var r=t.payload,i=t.config,o=t.instance,w=r.properties,s=r.event,g=o.getState("context.campaign"),d=i.gtagName;if(!(!window[d]||!e.length)){var f=I(g),m=o.user("userId"),p=u(u(u({},w),f),m?{user_id:m}:{});window[d]("event",s,p)}},loaded:function(){var t=c.dataLayerName,r=c.customScriptSrc,i=t&&window[t]&&Array.prototype.push===window[t].push;return P(r||j)&&i},methods:{addTag:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};window[c.gtagName]&&(window[c.gtagName]("config",t,r),e&&!e.includes(t)&&(e=e.concat(t)))},disable:function(t){for(var r=t?b(t):e,i=0;i<e.length;i++){var o=e[i];r.includes(o)&&(window["ga-disable-".concat(o)]=!0)}},enable:function(t){for(var r=t?b(t):e,i=0;i<e.length;i++){var o=e[i];r.includes(o)&&(window["ga-disable-".concat(o)]=!1)}}}}}function b(n){if(!n)throw new Error("No GA Measurement ID defined");if(Array.isArray(n))return n;if(typeof n=="string")return[n];throw new Error("GA Measurement ID must be string or array of strings")}function I(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a={},e=n.id,c=n.name,t=n.source,r=n.medium,i=n.content,o=n.keyword;return e&&(a.campaignId=e),c&&(a.campaignName=c),t&&(a.campaignSource=t),r&&(a.campaignMedium=r),i&&(a.campaignContent=i),o&&(a.campaignKeyword=o),a}function P(n){var a=document.querySelectorAll("script[src]"),e=new RegExp("^".concat(n));return!!Object.values(a).filter(function(c){return e.test(c.src)}).length}var k=S,C=S;export{k as default,C as init};
